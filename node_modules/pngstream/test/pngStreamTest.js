'use strict';

var pngstream = require('../');
var fs = require('fs');

exports.testConvertingToPng = function (test) {
    var SUT = pngstream();
    var expected = fs.readFileSync(__dirname + '/test.png');
    test.expect(1);

    SUT.on('data', function (pngData) {
        test.deepEqual(pngData, expected);
    }).on('finish', function () {
        test.done();
    });

    SUT.write({
        width: 2,
        height: 2,
        data: new Buffer([
            0, 0, 0, 255,
            255, 255, 255, 255,
            255, 0, 0, 255,
            0, 255, 255, 255
        ])
    });
    SUT.end();
};